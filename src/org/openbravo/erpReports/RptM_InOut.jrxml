<!-- Created with Jaspersoft Studio version 7.0.3.final using JasperReports Library version 7.0.3-41034ca841d452f3305ba55b9042260aaa1ab5dd  -->
<jasperReport name="RptM_InOut" language="java" pageWidth="595" pageHeight="842" columnWidth="483" leftMargin="56" rightMargin="56" topMargin="56" bottomMargin="56" uuid="d5dfe95f-ae06-4f79-81e9-d0b17882de12">
	<property name="net.sf.jasperreports.awt.ignore.missing.font" value="true"/>
	<property name="ireport.scriptlethandling" value="0"/>
	<property name="ireport.encoding" value="UTF-8"/>
	<property name="ireport.zoom" value="1.0"/>
	<property name="ireport.x" value="0"/>
	<property name="ireport.y" value="57"/>
	<import>net.sf.jasperreports.engine.*</import>
	<import>java.util.*</import>
	<import>net.sf.jasperreports.engine.data.*</import>
	<style name="default" vTextAlign="Middle" vImageAlign="Middle" fontName="Bitstream Vera Sans" fontSize="8.0"/>
	<style name="Report_Title" fontName="Bitstream Vera Sans" fontSize="18.0"/>
	<style name="Report_Subtitle" forecolor="#555555" fontName="Bitstream Vera Sans" fontSize="14.0"/>
	<style name="Report_Data_Label" fontName="Bitstream Vera Sans" fontSize="11.0" bold="true"/>
	<style name="Report_Data_Field" fontName="Bitstream Vera Sans" fontSize="11.0" bold="false"/>
	<style name="Total_Field" mode="Opaque" forecolor="#000000" backcolor="#CCCCCC" vTextAlign="Middle" vImageAlign="Middle" fontName="Bitstream Vera Sans" fontSize="11.0" bold="true"/>
	<style name="GroupHeader_DarkGray" mode="Opaque" forecolor="#FFFFFF" backcolor="#555555" vTextAlign="Middle" vImageAlign="Middle" fontName="Bitstream Vera Sans" fontSize="12.0" bold="true"/>
	<style name="Group_Data_Label" fontName="Bitstream Vera Sans" fontSize="11.0" bold="true"/>
	<style name="Group_Data_Field" fontName="Bitstream Vera Sans" fontSize="11.0"/>
	<style name="Detail_Header" mode="Opaque" forecolor="#FFFFFF" backcolor="#5D5D5D" vTextAlign="Middle" vImageAlign="Middle" fontName="Bitstream Vera Sans" fontSize="10.0" bold="true"/>
	<style name="Detail_Line" fontName="Bitstream Vera Sans" fontSize="8.0">
		<conditionalStyle mode="Opaque" backcolor="#CCCCCC">
			<conditionExpression><![CDATA[new Boolean($V{REPORT_COUNT}.intValue()%2==1)]]></conditionExpression>
		</conditionalStyle>
	</style>
	<style name="Total_Gray" mode="Opaque" forecolor="#000000" backcolor="#CCCCCC"/>
	<style name="Detail_Data_Label" mode="Opaque" backcolor="#CCCCCC" fontName="Bitstream Vera Sans" fontSize="10.0" bold="true"/>
	<style name="Detail_Data_Field" mode="Opaque" backcolor="#CCCCCC" fontName="Bitstream Vera Sans" fontSize="10.0"/>
	<style name="Group_Footer" fontName="Bitstream Vera Sans" fontSize="11.0" bold="true"/>
	<style name="Report_Footer" default="true" vTextAlign="Middle" vImageAlign="Middle" fontName="Bitstream Vera Sans" fontSize="11.0"/>
	<parameter name="DOCUMENT_ID" forPrompting="false" class="java.lang.String"/>
	<parameter name="NUMBERFORMAT" forPrompting="false" class="java.text.DecimalFormat"/>
	<parameter name="SUBREP_Rptm_InOut_Lines" forPrompting="false" class="net.sf.jasperreports.engine.JasperReport"/>
	<parameter name="BASE_WEB" forPrompting="false" class="java.lang.String">
		<defaultValueExpression><![CDATA["http://localhost/openbravo"]]></defaultValueExpression>
	</parameter>
	<query language="sql"><![CDATA[SELECT M_INOUT.M_INOUT_ID, M_INOUT.ISSOTRX, C_BPARTNER_LOCATION.NAME, COALESCE(TO_CHAR(C_LOCATION.ADDRESS1),'')||COALESCE(TO_CHAR(C_LOCATION.ADDRESS2),'') AS ADDRESS,
COALESCE(TO_CHAR(C_LOCATION.POSTAL),'')||' - '||COALESCE(TO_CHAR(C_LOCATION.CITY),'') AS POSTAL,
C_REGION.NAME AS REGION, M_INOUT.DOCUMENTNO, M_INOUT.MOVEMENTDATE, C_BPARTNER.VALUE AS PARTNER_VALUE, C_BPARTNER.TAXID,
MAX(C_ORDER.POREFERENCE) AS POREFERENCE, AD_CLIENT.DESCRIPTION AS ENTITY, C_LOCATION_DESCRIPTION(AD_ORGINFO.C_LOCATION_ID) AS ENTITY_LOCATION,
C_ORDER.DATEPROMISED, AD_ORGINFO.AD_ORG_ID AS ORGANIZATIONID, M_INOUT.docstatus AS STATUS, C_BPARTNER.NAME AS BP_NAME, AD_ORG.NAME AS ORG_NAME,
AD_ORGINFO.TAXID AS ORG_TAXID, C_Location_Description(AD_ORGINFO.C_LOCATION_ID) AS LOCATION, (COALESCE(TO_CHAR(AD_USER.NAME), '') || CASE WHEN AD_USER.NAME IS null THEN '' ELSE CHR(13) END || COALESCE(TO_CHAR(C_BPARTNER.TAXID), '') || CASE WHEN C_BPARTNER.TAXID IS null THEN '' ELSE CHR(13) END ||
COALESCE(TO_CHAR(ADDRESS1), '') || CASE WHEN ADDRESS1 IS null THEN '' ELSE CHR(13) END || COALESCE(TO_CHAR(POSTAL), '') || CASE WHEN POSTAL IS null THEN '' ELSE CHR(13) END ||
COALESCE(TO_CHAR(C_LOCATION.CITY), '') || CASE WHEN C_LOCATION.CITY IS null THEN '' ELSE CHR(13) END || COALESCE(TO_CHAR(C_COUNTRY.NAME), '') || CASE WHEN C_COUNTRY.NAME IS null THEN '' ELSE CHR(13) END ||
COALESCE(TO_CHAR(C_BPARTNER_LOCATION.PHONE), '') || CASE WHEN C_BPARTNER_LOCATION.PHONE IS null THEN '' ELSE CHR(13) END || COALESCE(TO_CHAR(C_BPARTNER_LOCATION.FAX), '') ||
CASE WHEN C_BPARTNER_LOCATION.FAX IS null THEN '' ELSE CHR(13) END) AS BP_DATA,
SHOWLOGO, SHOWCOMPANYDATA, HEADERMARGIN
FROM C_BPARTNER_LOCATION right join M_INOUT on M_INOUT.C_BPARTNER_LOCATION_ID = C_BPARTNER_LOCATION.C_BPARTNER_LOCATION_ID
			 left join C_LOCATION on C_BPARTNER_LOCATION.C_LOCATION_ID = C_LOCATION.C_LOCATION_ID
			 left join C_COUNTRY on C_LOCATION.C_COUNTRY_ID = C_COUNTRY.C_COUNTRY_ID
			 left join C_REGION on C_LOCATION.C_REGION_ID = C_REGION.C_REGION_ID
			 left join C_ORDER on M_INOUT.C_ORDER_ID = C_ORDER.C_ORDER_ID
			 --left join AD_ORG on AD_ORG.AD_ORG_ID = AD_ORGINFO.AD_ORG_ID
			 left join AD_USER on C_ORDER.AD_USER_ID = AD_USER.AD_USER_ID
			 left join C_POC_DOCTYPE_TEMPLATE ON C_POC_DOCTYPE_TEMPLATE.C_DOCTYPE_ID = M_INOUT.C_DOCTYPE_ID,
     C_BPARTNER, AD_CLIENT, AD_ORGINFO, AD_ORG
WHERE M_INOUT.C_BPARTNER_ID = C_BPARTNER.C_BPARTNER_ID
AND M_INOUT.AD_CLIENT_ID = AD_CLIENT.AD_CLIENT_ID
AND AD_ORGINFO.AD_ORG_ID = (SELECT o.AD_ORG_ID FROM AD_ORG o JOIN AD_OrgType t USING (AD_ORGTYPE_ID)
                            WHERE AD_ISORGINCLUDED(M_INOUT.AD_ORG_ID, o.ad_org_id, M_INOUT.ad_client_id)<>-1
                                  AND (t.IsLegalEntity='Y' OR t.IsAcctLegalEntity='Y'))
AND COALESCE(C_BPARTNER_LOCATION.ISSHIPTO, 'Y') = 'Y'
AND M_INOUT.M_INOUT_ID IN ($P{DOCUMENT_ID})
AND AD_ORGINFO.AD_ORG_ID = AD_ORG.AD_ORG_ID
GROUP BY M_INOUT.M_INOUT_ID, M_INOUT.ISSOTRX, C_BPARTNER.NAME, C_BPARTNER_LOCATION.NAME, C_LOCATION.ADDRESS1, C_LOCATION.ADDRESS2, C_LOCATION.POSTAL, C_LOCATION.CITY, C_REGION.NAME,
M_INOUT.DOCUMENTNO, M_INOUT.MOVEMENTDATE, C_BPARTNER.VALUE, C_BPARTNER.TAXID, AD_CLIENT.DESCRIPTION, AD_ORGINFO.C_LOCATION_ID, C_ORDER.DATEPROMISED, AD_ORGINFO.ad_org_id, M_INOUT.docstatus,
AD_ORG.NAME, AD_ORGINFO.TAXID, AD_USER.NAME, C_BPARTNER_LOCATION.PHONE, C_BPARTNER_LOCATION.FAX, SHOWLOGO, SHOWCOMPANYDATA, HEADERMARGIN, AD_ORGINFO.ad_client_id, C_COUNTRY.NAME]]></query>
	<field name="m_inout_id" class="java.lang.String"/>
	<field name="issotrx" class="java.lang.String"/>
	<field name="name" class="java.lang.String"/>
	<field name="address" class="java.lang.String"/>
	<field name="postal" class="java.lang.String"/>
	<field name="region" class="java.lang.String"/>
	<field name="documentno" class="java.lang.String"/>
	<field name="movementdate" class="java.sql.Timestamp"/>
	<field name="partner_value" class="java.lang.String"/>
	<field name="taxid" class="java.lang.String"/>
	<field name="poreference" class="java.lang.String"/>
	<field name="entity" class="java.lang.String"/>
	<field name="entity_location" class="java.lang.String"/>
	<field name="datepromised" class="java.sql.Timestamp"/>
	<field name="organizationid" class="java.lang.String"/>
	<field name="status" class="java.lang.String"/>
	<field name="BP_NAME" class="java.lang.String"/>
	<field name="ORG_NAME" class="java.lang.String"/>
	<field name="ORG_TAXID" class="java.lang.String"/>
	<field name="LOCATION" class="java.lang.String"/>
	<field name="BP_DATA" class="java.lang.String"/>
	<field name="SHOWLOGO" class="java.lang.String"/>
	<field name="SHOWCOMPANYDATA" class="java.lang.String"/>
	<field name="HEADERMARGIN" class="java.lang.String"/>
	<group name="PrintLarge" reprintHeaderOnEachPage="true">
		<expression><![CDATA[]]></expression>
		<groupHeader>
			<band height="120" splitType="Stretch">
				<printWhenExpression><![CDATA[new Boolean($F{HEADERMARGIN}.equalsIgnoreCase("large"))]]></printWhenExpression>
			</band>
		</groupHeader>
		<groupFooter>
			<band splitType="Stretch"/>
		</groupFooter>
	</group>
	<group name="PrintMedium" reprintHeaderOnEachPage="true">
		<expression><![CDATA[]]></expression>
		<groupHeader>
			<band height="80" splitType="Stretch">
				<printWhenExpression><![CDATA[new Boolean($F{HEADERMARGIN}.equalsIgnoreCase("medium"))]]></printWhenExpression>
			</band>
		</groupHeader>
		<groupFooter>
			<band splitType="Stretch"/>
		</groupFooter>
	</group>
	<group name="PrintSmall" reprintHeaderOnEachPage="true">
		<expression><![CDATA[]]></expression>
		<groupHeader>
			<band height="50" splitType="Stretch">
				<printWhenExpression><![CDATA[new Boolean($F{HEADERMARGIN}.equalsIgnoreCase("small"))]]></printWhenExpression>
			</band>
		</groupHeader>
		<groupFooter>
			<band splitType="Stretch"/>
		</groupFooter>
	</group>
	<group name="M_INOUT_ID" startNewPage="true">
		<expression><![CDATA[$F{m_inout_id}]]></expression>
		<groupHeader>
			<band height="255" splitType="Stretch">
				<element kind="line" uuid="1828a822-5220-4f13-ad6f-f6f736dbfdf2" key="line-2" x="250" y="233" width="233" height="1"/>
				<element kind="textField" uuid="ba61bca4-094e-49f5-8e32-264d0e3fb25d" key="textField-18" stretchType="ElementGroupHeight" x="250" y="238" width="108" height="16" fontName="Arial" fontSize="10.0" blankWhenNull="false" printWhenDetailOverflows="true" bold="false">
					<expression><![CDATA[$F{documentno}]]></expression>
					<box>
						<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						<bottomPen lineWidth="0.0" lineColor="#000000"/>
						<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					</box>
				</element>
				<element kind="textField" uuid="17c2a483-4644-4617-a57a-469fc9d2bcac" key="textField-19" stretchType="ElementGroupHeight" x="358" y="238" width="125" height="16" fontName="Arial" fontSize="10.0" blankWhenNull="false" printWhenDetailOverflows="true" bold="false">
					<expression><![CDATA[org.openbravo.erpCommon.utility.Utility.applyCountryDateFormat($F{movementdate},$F{organizationid})]]></expression>
					<box>
						<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						<bottomPen lineWidth="0.0" lineColor="#000000"/>
						<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					</box>
				</element>
				<element kind="image" uuid="7ead9fc2-efc5-4e5b-9bfd-715cdafc91db" key="image-1" x="307" y="0" width="176" height="91" scaleImage="RetainShape" usingCache="true" hImageAlign="Right" vImageAlign="Top">
					<printWhenExpression><![CDATA[new Boolean($F{SHOWLOGO}.equalsIgnoreCase("Y"))]]></printWhenExpression>
					<expression><![CDATA[org.openbravo.erpCommon.utility.Utility.showImageLogo("yourcompanylegal", $F{organizationid})]]></expression>
				</element>
				<element kind="textField" uuid="1c3e81eb-a5d2-4189-8074-55a67ecc5937" key="textField-22" x="128" y="168" width="239" height="56" forecolor="#FF0000" fontSize="36.0" blankWhenNull="false" vTextAlign="Middle">
					<expression><![CDATA[(($F{status}.compareTo("VO")==0) ? "VOIDED" : " ")]]></expression>
				</element>
				<element kind="textField" uuid="55377e82-5d90-47de-9481-e588aad30690" key="textField-27" x="0" y="94" width="260" height="110" blankWhenNull="false" printWhenDetailOverflows="true" hTextAlign="Left" vTextAlign="Top">
					<expression><![CDATA[$F{BP_NAME} + "\n" + $F{BP_DATA}]]></expression>
				</element>
				<element kind="textField" uuid="49e85e51-a3cd-4d37-9460-6980c2b5217e" key="textField-28" x="271" y="94" width="212" height="42" blankWhenNull="false" printWhenDetailOverflows="true" hTextAlign="Right" vTextAlign="Top">
					<printWhenExpression><![CDATA[new Boolean($F{SHOWCOMPANYDATA}.equalsIgnoreCase("Y"))]]></printWhenExpression>
					<expression><![CDATA[($F{LOCATION}==null ? $F{ORG_NAME} + "\n" + $F{ORG_TAXID} + "\n" : $F{ORG_NAME} + "\n" + $F{ORG_TAXID} + "\n" + $F{LOCATION})]]></expression>
				</element>
				<element kind="staticText" uuid="08c54537-996c-4393-89a3-f6e148eef471" key="staticText-1" x="0" y="6" width="320" height="37" fontSize="26.0" vTextAlign="Middle">
					<printWhenExpression><![CDATA[new Boolean($F{issotrx}.equalsIgnoreCase("Y"))]]></printWhenExpression>
					<text><![CDATA[GOODS SHIPMENT]]></text>
				</element>
				<element kind="staticText" uuid="d434d3cc-b9cd-49ce-98e2-95d79b2a2c50" key="staticText-2" x="0" y="6" width="320" height="37" fontSize="26.0" vTextAlign="Middle">
					<printWhenExpression><![CDATA[new Boolean($F{issotrx}.equalsIgnoreCase("N"))]]></printWhenExpression>
					<text><![CDATA[GOODS RECEIPT]]></text>
				</element>
				<element kind="staticText" uuid="8a33a629-6e0a-406f-8756-97f1acd3dbd1" key="staticText-3" x="250" y="217" width="108" height="15" fontSize="10.0" pdfFontName="Helvetica-Bold" bold="true">
					<printWhenExpression><![CDATA[new Boolean($F{issotrx}.equalsIgnoreCase("Y"))]]></printWhenExpression>
					<text><![CDATA[Shipment No.]]></text>
				</element>
				<element kind="staticText" uuid="b737bced-051a-48da-854e-f88497087928" key="staticText-4" x="250" y="217" width="108" height="15" fontSize="10.0" pdfFontName="Helvetica-Bold" bold="true">
					<printWhenExpression><![CDATA[new Boolean($F{issotrx}.equalsIgnoreCase("N"))]]></printWhenExpression>
					<text><![CDATA[Receipt No.]]></text>
				</element>
				<element kind="staticText" uuid="6084394d-0c92-416f-9d63-534c0464c80e" key="staticText-5" x="358" y="217" width="125" height="16" fontSize="10.0" pdfFontName="Helvetica-Bold" bold="true">
					<printWhenExpression><![CDATA[new Boolean($F{issotrx}.equalsIgnoreCase("Y"))]]></printWhenExpression>
					<text><![CDATA[Shipment Date]]></text>
				</element>
				<element kind="staticText" uuid="7488bd72-b29a-4bbc-9c13-a932fff8c5dd" key="staticText-6" x="358" y="217" width="125" height="16" fontSize="10.0" pdfFontName="Helvetica-Bold" bold="true">
					<printWhenExpression><![CDATA[new Boolean($F{issotrx}.equalsIgnoreCase("N"))]]></printWhenExpression>
					<text><![CDATA[Receipt Date]]></text>
				</element>
			</band>
		</groupHeader>
		<groupFooter>
			<band splitType="Stretch"/>
		</groupFooter>
	</group>
	<background splitType="Stretch"/>
	<title splitType="Stretch"/>
	<pageHeader splitType="Stretch"/>
	<columnHeader splitType="Stretch"/>
	<detail>
		<band height="35" splitType="Stretch">
			<element kind="subreport" uuid="97d6e866-44e2-4083-bfec-7226b85a1777" key="subreport-1" x="0" y="0" width="483" height="35" usingCache="true">
				<connectionExpression><![CDATA[$P{REPORT_CONNECTION}]]></connectionExpression>
				<expression><![CDATA[$P{SUBREP_Rptm_InOut_Lines}]]></expression>
				<parameter name="M_INOUT_ID">
					<expression><![CDATA[$F{m_inout_id}]]></expression>
				</parameter>
				<parameter name="NUMBERFORMAT">
					<expression><![CDATA[org.openbravo.erpCommon.utility.Utility.getCountryNumberFormat($F{organizationid},$P{NUMBERFORMAT})]]></expression>
				</parameter>
			</element>
		</band>
	</detail>
	<columnFooter splitType="Stretch"/>
	<pageFooter height="53" splitType="Stretch">
		<element kind="textField" uuid="2ec9f942-39e6-4cea-af86-4d44944538f4" key="textField-33" x="359" y="31" width="100" height="18" fontSize="8.0" blankWhenNull="false" hTextAlign="Right" vTextAlign="Middle">
			<expression><![CDATA["Page " + $V{PAGE_NUMBER} + " of "]]></expression>
		</element>
		<element kind="textField" uuid="f1b21094-fb8d-4e85-a0d2-c6d7114a7ca9" key="textField-34" x="461" y="31" width="18" height="18" fontSize="8.0" evaluationTime="Report" blankWhenNull="false" hTextAlign="Left" vTextAlign="Middle" style="default">
			<expression><![CDATA["" + $V{PAGE_NUMBER}]]></expression>
		</element>
		<element kind="line" uuid="241d2f54-7e9f-4021-85d1-bb2788ccb25d" key="line-3" x="0" y="27" width="483" height="1"/>
	</pageFooter>
	<summary splitType="Stretch"/>
</jasperReport>
