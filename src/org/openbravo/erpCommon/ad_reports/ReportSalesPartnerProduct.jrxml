<!-- Created with Jaspersoft Studio version 7.0.3.final using JasperReports Library version 7.0.3-41034ca841d452f3305ba55b9042260aaa1ab5dd  -->
<jasperReport name="ReportSalesPartnerProduct" language="java" pageWidth="595" pageHeight="842" columnWidth="535" leftMargin="30" rightMargin="30" topMargin="20" bottomMargin="20" uuid="a020faf2-2e0e-4b3d-a9b3-a8d764cc9873">
	<property name="ireport.scriptlethandling" value="0"/>
	<property name="ireport.encoding" value="UTF-8"/>
	<property name="ireport.zoom" value="1.0"/>
	<property name="ireport.x" value="0"/>
	<property name="ireport.y" value="0"/>
	<import>net.sf.jasperreports.engine.*</import>
	<import>java.util.*</import>
	<import>net.sf.jasperreports.engine.data.*</import>
	<parameter name="LANGUAGE" forPrompting="false" class="java.lang.String">
		<defaultValueExpression><![CDATA["es_ES"]]></defaultValueExpression>
	</parameter>
	<parameter name="SUBREPORT_DIR" forPrompting="false" class="java.lang.String">
		<defaultValueExpression><![CDATA["/home/gorkaion/openbravo/jasperreports/"]]></defaultValueExpression>
	</parameter>
	<parameter name="BASE_DESIGN" forPrompting="false" class="java.lang.String">
		<defaultValueExpression><![CDATA["/home/iperdomo/workspace/src/openbravo/pi-libupdate/src"]]></defaultValueExpression>
	</parameter>
	<parameter name="USER_CLIENT" forPrompting="false" class="java.lang.String"/>
	<parameter name="NUMBERFORMAT" forPrompting="false" class="java.text.DecimalFormat"/>
	<parameter name="LOCALE" forPrompting="false" class="java.util.Locale"/>
	<parameter name="C_Currency_ID" forPrompting="false" class="java.lang.String">
		<defaultValueExpression><![CDATA["102"]]></defaultValueExpression>
	</parameter>
	<query language="sql"><![CDATA[SELECT	AD_COLUMN_IDENTIFIER(TO_CHAR('C_BPartner'),TO_CHAR(C_BPARTNER_ID),TO_CHAR($P{LANGUAGE})) AS PARTNER,
			        C_BPARTNER_ID,
					SUM(CONVAMOUNT) AS CONVAMOUNT,
			        SUM(GRANDTOTAL) AS GRANDTOTAL,
			        SUM(ORDERNO) AS ORDERNO,
			        C_CURRENCY_ISOSYM($P{C_Currency_ID}) AS CONVISOSYM,
			        C_CURRENCY_SYMBOL($P{C_Currency_ID},0,'Y') AS CONVSYM
			FROM    (SELECT C_CURRENCY_CONVERT(SUM(GRANDTOTAL),TRCURRENCYID,$P{C_Currency_ID},TO_DATE(TRDATE),NULL,TRCLIENTID,TRORGID) AS CONVAMOUNT,
			                SUM(GRANDTOTAL) AS GRANDTOTAL,
			                COUNT(C_BPARTNER_ID) AS ORDERNO,
			                C_BPARTNER_ID
			        FROM   	(SELECT C_ORDER.C_CURRENCY_ID AS TRCURRENCYID,
			                        TO_DATE(COALESCE(C_ORDER.DATEORDERED,NOW())) AS TRDATE,
			                        C_ORDER.AD_CLIENT_ID AS TRCLIENTID,
			                        C_ORDER.AD_ORG_ID AS TRORGID,
			                        C_ORDER.GRANDTOTAL,
			                        C_ORDER.C_BPARTNER_ID
							FROM	C_ORDER
			                        LEFT JOIN AD_USER ON C_ORDER.SALESREP_ID = AD_USER.AD_USER_ID,
			                        C_BPARTNER
			                        LEFT JOIN C_BPARTNER CB ON C_BPARTNER.SALESREP_ID = CB.C_BPARTNER_ID,
			                        C_BP_GROUP,
			                        M_PRODUCT,
			                        M_PRODUCT_CATEGORY,
			                        M_WAREHOUSE,
			                        AD_ORG
			                WHERE	C_ORDER.C_BPARTNER_ID = C_BPARTNER.C_BPARTNER_ID
			                        AND C_BPARTNER.C_BP_GROUP_ID = C_BP_GROUP.C_BP_GROUP_ID
			                        AND M_PRODUCT.M_PRODUCT_CATEGORY_ID = M_PRODUCT_CATEGORY.M_PRODUCT_CATEGORY_ID
			                        AND C_ORDER.M_WAREHOUSE_ID = M_WAREHOUSE.M_WAREHOUSE_ID
			                        AND C_ORDER.AD_ORG_ID = AD_ORG.AD_ORG_ID
			                        AND C_ORDER.ISSOTRX = 'Y'
			                        AND C_ORDER.PROCESSED = 'Y'
			                        AND C_ORDER.DOCSTATUS IN ('CO','CL')
						AND C_ORDER.AD_CLIENT_ID IN ($P!{USER_CLIENT})
			                GROUP BY 	C_ORDER.C_BPARTNER_ID,C_ORDER.C_CURRENCY_ID,C_ORDER.C_CURRENCY_ID,C_ORDER.DATEORDERED,
			                			C_ORDER.DATEORDERED,C_ORDER.AD_CLIENT_ID,C_ORDER.AD_ORG_ID,C_ORDER.GRANDTOTAL) AA
			        GROUP BY AA.C_BPARTNER_ID,TRCURRENCYID,TRDATE,TRCLIENTID,TRORGID) ZZ
			GROUP BY ZZ.C_BPARTNER_ID
			ORDER BY ORDERNO DESC]]></query>
	<field name="partner" class="java.lang.String"/>
	<field name="c_bpartner_id" class="java.lang.String"/>
	<field name="convamount" class="java.math.BigDecimal"/>
	<field name="grandtotal" class="java.math.BigDecimal"/>
	<field name="orderno" class="java.math.BigDecimal"/>
	<field name="convisosym" class="java.lang.String"/>
	<field name="convsym" class="java.lang.String"/>
	<background splitType="Stretch"/>
	<title height="50" splitType="Stretch">
		<element kind="staticText" uuid="2a83ee59-247e-4260-8c57-b0cecaba8d07" key="staticText" x="25" y="5" width="480" height="40" fontSize="28.0" bold="true" hTextAlign="Center">
			<text><![CDATA[Sales by Partner and Product]]></text>
			<box>
				<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
				<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
				<bottomPen lineWidth="0.0" lineColor="#000000"/>
				<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
			</box>
		</element>
		<element kind="line" uuid="5ba898d3-749a-4a0a-a134-d56e1b293120" key="line" positionType="FixRelativeToBottom" x="0" y="48" width="534" height="1" forecolor="#000000"/>
		<element kind="line" uuid="236b6f0d-2d3b-4242-a603-a0629ab9ff9e" key="line" x="0" y="3" width="534" height="1" forecolor="#000000"/>
	</title>
	<pageHeader height="9" splitType="Stretch"/>
	<columnHeader height="20" splitType="Stretch">
		<element kind="rectangle" uuid="3801f544-d97b-4651-9c2e-d2bc15edabb5" key="element-22" mode="Opaque" x="1" y="1" width="534" height="17" forecolor="#000000" backcolor="#999999" radius="0"/>
		<element kind="staticText" uuid="26292f40-4325-48ef-a4f8-2d8260125442" key="element-90" x="0" y="1" width="178" height="16" forecolor="#FFFFFF" fontName="" fontSize="12.0">
			<text><![CDATA[PARTNER]]></text>
			<box leftPadding="2" rightPadding="2">
				<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
				<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
				<bottomPen lineWidth="0.0" lineColor="#000000"/>
				<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
			</box>
		</element>
		<element kind="staticText" uuid="001265c3-ec42-4823-ad26-16234745cca8" key="element-90" x="178" y="1" width="103" height="16" forecolor="#FFFFFF" fontName="" fontSize="12.0">
			<text><![CDATA[GRAND TOTAL]]></text>
			<box leftPadding="2" rightPadding="2">
				<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
				<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
				<bottomPen lineWidth="0.0" lineColor="#000000"/>
				<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
			</box>
		</element>
		<element kind="staticText" uuid="71af620d-1b37-4354-ba43-e154310aa47b" key="element-90" x="356" y="1" width="178" height="16" forecolor="#FFFFFF" fontName="" fontSize="12.0">
			<text><![CDATA[Number of Orders]]></text>
			<box leftPadding="2" rightPadding="2">
				<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
				<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
				<bottomPen lineWidth="0.0" lineColor="#000000"/>
				<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
			</box>
		</element>
		<element kind="staticText" uuid="57f6f59f-07f9-4041-bdf5-4c789ca8b544" key="element-91" x="281" y="1" width="75" height="16" forecolor="#FFFFFF" fontName="" fontSize="12.0">
			<text><![CDATA[CURRENCY]]></text>
			<box leftPadding="2" rightPadding="2">
				<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
				<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
				<bottomPen lineWidth="0.0" lineColor="#000000"/>
				<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
			</box>
		</element>
	</columnHeader>
	<detail>
		<band height="197" splitType="Stretch">
			<element kind="textField" uuid="7599651f-5987-4e5a-a4e0-84170b0669b1" key="textField" x="0" y="1" width="178" height="15" fontName="Times-Roman" fontSize="12.0" textAdjust="StretchHeight" pattern="" blankWhenNull="true">
				<expression><![CDATA[$F{partner}]]></expression>
				<box leftPadding="2" rightPadding="2">
					<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.0" lineColor="#000000"/>
					<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
			</element>
			<element kind="textField" uuid="3aa25335-79cd-49d7-92e4-6aa0c6e6347d" key="textField" x="178" y="1" width="103" height="15" fontName="Times-Roman" fontSize="12.0" textAdjust="StretchHeight" pattern="" blankWhenNull="true" hTextAlign="Left">
				<expression><![CDATA[($F{convamount}!=null)?$P{NUMBERFORMAT}.format($F{convamount}):new String(" ")]]></expression>
				<box leftPadding="2" rightPadding="2">
					<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.0" lineColor="#000000"/>
					<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
			</element>
			<element kind="textField" uuid="46ab03f4-3cd2-49a6-9ee1-3b5923492a2a" key="textField" x="356" y="1" width="178" height="15" fontName="Times-Roman" fontSize="12.0" textAdjust="StretchHeight" pattern="" blankWhenNull="true" hTextAlign="Left">
				<expression><![CDATA[($F{orderno}!=null)?$P{NUMBERFORMAT}.format($F{orderno}.intValue()):new String(" ")]]></expression>
				<box leftPadding="2" rightPadding="2">
					<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.0" lineColor="#000000"/>
					<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
			</element>
			<element kind="subreport" uuid="c5c14ba7-53c8-408b-bad1-6cb8f2efa7a6" key="subreport-1" x="31" y="17" width="452" height="173" usingCache="true">
				<connectionExpression><![CDATA[$P{REPORT_CONNECTION}]]></connectionExpression>
				<expression><![CDATA[$P{BASE_DESIGN} + "/org/openbravo/erpCommon/ad_reports/ReportSalesPartnerProduct_srpt.jasper"]]></expression>
				<parameter name="PARTNER">
					<expression><![CDATA[$F{c_bpartner_id}]]></expression>
				</parameter>
				<parameter name="NUMBERFORMAT">
					<expression><![CDATA[$P{NUMBERFORMAT}]]></expression>
				</parameter>
				<parameter name="LOCALE">
					<expression><![CDATA[$P{LOCALE}]]></expression>
				</parameter>
				<parameter name="LANGUAGE">
					<expression><![CDATA[$P{LANGUAGE}]]></expression>
				</parameter>
			</element>
			<element kind="textField" uuid="3424e71d-b75d-4900-a072-17c96f2291d4" key="textField-1" x="281" y="1" width="75" height="15" fontName="Times-Roman" fontSize="12.0" textAdjust="StretchHeight" pattern="" blankWhenNull="true" hTextAlign="Left">
				<expression><![CDATA[$F{convisosym}]]></expression>
				<box leftPadding="2" rightPadding="2">
					<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.0" lineColor="#000000"/>
					<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
			</element>
		</band>
	</detail>
	<columnFooter splitType="Stretch"/>
	<pageFooter height="27" splitType="Stretch">
		<element kind="textField" uuid="fb9fe719-9025-4b53-bf69-f5b7d00a31f3" key="textField" x="325" y="4" width="170" height="19" fontName="Helvetica" fontSize="10.0" pattern="" blankWhenNull="false" hTextAlign="Right">
			<expression><![CDATA["Page " + $V{PAGE_NUMBER} + " of "]]></expression>
			<box>
				<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
				<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
				<bottomPen lineWidth="0.0" lineColor="#000000"/>
				<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
			</box>
		</element>
		<element kind="textField" uuid="426652c3-c360-4b2d-a6e9-7e363fade132" key="textField" x="499" y="4" width="36" height="19" forecolor="#000000" backcolor="#FFFFFF" rotation="None" fontName="Helvetica" fontSize="10.0" pdfFontName="Helvetica" pdfEncoding="CP1252" evaluationTime="Report" pattern="" blankWhenNull="false" pdfEmbedded="false" bold="false" italic="false" underline="false" strikeThrough="false" hTextAlign="Left" vTextAlign="Top">
			<paragraph lineSpacing="Single"/>
			<expression><![CDATA["" + $V{PAGE_NUMBER}]]></expression>
			<box>
				<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
				<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
				<bottomPen lineWidth="0.0" lineColor="#000000"/>
				<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
			</box>
		</element>
		<element kind="line" uuid="0cb9ced0-d4c5-49e2-b228-dc4ec143f76f" key="line" x="0" y="1" width="535" height="1" forecolor="#000000"/>
		<element kind="textField" uuid="2c37a9eb-2ab8-4b0a-b34c-790ed2088432" key="textField" x="1" y="6" width="209" height="19" fontName="Times-Roman" fontSize="10.0" pattern="" blankWhenNull="false">
			<expression><![CDATA[new Date()]]></expression>
			<box>
				<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
				<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
				<bottomPen lineWidth="0.0" lineColor="#000000"/>
				<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
			</box>
		</element>
	</pageFooter>
	<summary splitType="Stretch"/>
</jasperReport>
